# pre-installation
- set_fact:
    sqlserver_download: "{{sqlserver_meta[sqlserver_version][sqlserver_language].download}}"

# Download
- name: Create temporary directory
  win_file:
    path: C:\temp
    state: directory

- name: Download SQLServer
  win_get_url:
    url: "{{sqlserver_download}}"
    dest: C:\temp\


# different version for installation
- name: Install SQLServer{{sqlserver_version}}
  include: sqlserver{{sqlserver_version}}.yml


## create password description
- name: Create Credentials Directory
  win_file:
    path: C:\Credentials\
    state: directory

- name: Copy password.txt to Credentials
  win_template:
    src: password.txt.j2
    dest: C:\Credentials\password.txt

- name: Create password.lnk on desktop
  win_shortcut:
    src: C:\Credentials\password.txt
    dest: C:\Users\Public\Desktop\password.lnk